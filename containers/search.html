<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../css/search.css"/>
	</head>

	<body class="higher">
		<div class="header">
			<header class="mui-bar mui-bar-nav">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
				<div class="mui-pull-right btns">
					<button type="button" class="mui-btn mui-btn-success">动作</button>
					<button type="button" class="mui-btn mui-btn-warning">喜剧</button>
					<button type="button" class="mui-btn mui-btn-danger">爱情</button>
					<button type="button" class="mui-btn mui-btn-royal">悬疑</button>
				</div>
				 
			</header>
			<form id="form">
				<div class="mui-input-row mui-search">
				    <input id="inp" type="search" class="mui-input-clear" placeholder="">
				</div>
			</form>
			
		</div>
		<script src="../js/zepto_1.1.3.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
		//启用双击监听
		mui.init({
			gestureConfig:{
				doubletap:true
			},
			subpages:[{
				url:'search-content.html',
				id:'search-content.html',
				styles:{
					top: '110px',
					bottom: '0px',
				}
			}]
		});

		var content = null;
		// $('#inp').keyup(function (e) {
		// 	// 判断 回车 监听事件
		// 	if (e.keyCode === 13) {
		// 		// 使用 alert 弹出框测试
		// 		// alert(this.value)
		// 		if (content === null) {
		// 			// 通过 id 获取到 search-content.html 界面(窗口)
		// 			content = plus.webview.getWebviewById('search-content.html');
		// 		}
		// 		// mui.fire(触发的窗口, 触发的事件, 传参数)
		// 		// change-text 是 search窗口传过来的数据	
		// 		mui.fire(content, 'change-text', {
		// 			q: $('#inp').val(),
		// 			tag: ''
		// 		})
		// 	}
		// })
		$('#form').submit(function (e) {
			e.preventDefault();
			if (content === null) {
					// 通过 id 获取到 search-content.html 界面(窗口)
					content = plus.webview.getWebviewById('search-content.html');
				}
			// mui.fire(触发的窗口, 触发的事件, 传参数)
			// change-text 是 search窗口传过来的数据	
			mui.fire(content, 'change-text', {
				q: $('#inp').val(),
				tag: ''
			})
		})
		// 通过事件委托的方式添加事件
		$('.btns').on('tap', 'button', function () {
			var tag = $(this).html();
			if (content === null) {
					// 通过 id 获取到 search-content.html 界面(窗口)
					content = plus.webview.getWebviewById('search-content.html');
				}
			// mui.fire(触发的窗口, 触发的事件, 传参数)
			// change-text 是 search窗口传过来的数据	
			mui.fire(content, 'change-text', {
				q: '',
				tag: tag
			})
		})
		</script>
	</body>

</html>